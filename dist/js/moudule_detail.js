"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Detail=void 0;var _createClass=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),_foo=require("./foo.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Detail=function(){function e(){_classCallCheck(this,e),this.ajax=(new _foo.Way).ajax,this.$=(new _foo.Way).$,this.getRequest=(new _foo.Way).getRequest,this.jstcookie={addcookie:(new _foo.Way).addcookie,getcookie:(new _foo.Way).getcookie,delcookie:(new _foo.Way).delcookie},(new _foo.Way).topEvent()}return _createClass(e,[{key:"detail_init",value:function(){var t=this,e=t.getRequest();t.ajax({type:"get",url:"../php/detail.php",data:e,datatype:"json"}).then(function(e){t.detail_render(e[0]),t.detail_events()})}},{key:"detail_render",value:function(e){console.log(e);var t=this,o=t.$(".sImg-i"),i=t.$(".imgOption"),n=e.urls.split(","),s=t.$(".tb-title"),l=t.$(".tb-towtitle"),r=t.$(".tb-price"),a=(t.$(".num"),t.$(".linkBasket"),"");o.setAttribute("src",e.url);var f=!0,c=!1,d=void 0;try{for(var g,u=n[Symbol.iterator]();!(f=(g=u.next()).done);f=!0){a+=' <li><img src="'+g.value+'" alt=""></li>'}}catch(e){c=!0,d=e}finally{try{!f&&u.return&&u.return()}finally{if(c)throw d}}i.innerHTML=a,s.innerHTML=e.title,l.innerHTML=e.title,r.innerHTML=e.price}},{key:"detail_events",value:function(){var n,s,i,l,e,t,o,r=this,a=r.$(".sImg"),f=r.$(".bigImg-box"),c=r.$(".sel"),d=r.$(".lbtn"),g=r.$(".rbtn");a.addEventListener("mouseover",function(e){c.classList.remove("none"),f.classList.remove("none"),f.firstElementChild.setAttribute("src",a.lastElementChild.src),c.style.width=a.offsetWidth*f.offsetWidth/r.$(".bigImg-box>img").offsetWidth+"px",c.style.height=a.offsetHeight*f.offsetHeight/r.$(".bigImg-box>img").offsetHeight+"px",a.addEventListener("mousemove",function(e){var t=(e=e||window.event).pageY-r.$("#content").offsetTop-c.offsetWidth/2,o=e.pageX-r.$("#content").offsetLeft-c.offsetHeight/2,i=r.$(".bigImg-box>img").offsetWidth/a.offsetWidth;o<=0?o=0:o>a.offsetWidth-c.offsetWidth&&(o=a.offsetWidth-c.offsetWidth-2),t<=0?t=0:t>a.offsetHeight-c.offsetHeight&&(t=a.offsetHeight-c.offsetHeight-2),c.style.left=o+"px",c.style.top=t+"px",r.$(".bigImg-box>img").style.left=-o*i+"px",r.$(".bigImg-box>img").style.top=-t*i+"px"}),a.addEventListener("mouseout",function(){c.classList.add("none"),f.classList.add("none")})}),s=n=0,i=r.$(".imgOption"),(l=r.$(".imgOption>li","true"))[0].style="border: 2px solid #ff910e;",g.addEventListener("click",function(){if(n>=l.length-1)n=l.length-1;else{n++;for(var e=0;e<l.length;e++)l[e].style="border:0px";if(l[n].style="border:2px solid gold",3<n&&s<4){var t=++s*r.$(".imgOption>li").offsetWidth;i.style="left:"+-t+"px;"}n<=l.length-1&&r.$(".sImg-i").setAttribute("src",l[n].firstElementChild.src)}}),d.addEventListener("click",function(){var e=r.$(".sImg-i");if(n<=0)n=0;else{n--;for(var t=0;t<l.length;t++)l[t].style="border:0px";e.setAttribute("src",l[n].firstElementChild.src),l[n].style="border:2px solid gold"}if(0!==s&&(s--,console.log(n+"count"),console.log(s+"movernum")),n<l.length-3){console.log(s);var o=s*r.$(".imgOption>li").offsetWidth;i.style="left:"+o+"px;"}}),i.addEventListener("click",function(e){for(var t=r.$(".sImg-i"),o=0;o<l.length;o++)l[o].style="border:0px";if("IMG"==e.target.nodeName){e.target.parentNode.style="border:2px solid gold";for(var i=0;i<l.length;i++)l[i]==e.target.parentNode&&(t.setAttribute("src",e.target.src),(n=i)<4?s=0:4<=i&&(s=i))}}),e=r.$(".tb-price"),t=r.$(".linkBasket"),o=location.search.slice(1).split("=")[1],e.innerHTML.split(".")[0],t.addEventListener("click",function(){var e=r.$(".num").value;console.log(e),console.log(o),r.jstcookie.addcookie(o,e,1),alert("添加成功")})}}]),e}();exports.Detail=Detail;